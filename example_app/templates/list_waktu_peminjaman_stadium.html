{% extends 'base.html' %}

{% block meta %}
<title>Peminjaman Stadium</title>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
</head>
{% endblock meta %}

{% block content %}
<div>
    <div class="modal-body">
        <div style="width: 400px; display: flex; justify-content: center; text-align: center; margin: auto;">
            <table class="table table-bordered border-dark">
                <thead>
                    <tr>
                        <th scope="col" colspan="2">List Waktu Stadium {{stadium_name}}</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>08:00 - 10:00</td>
                        <td>
                            <form method="post" action="{% url 'example_app:list_waktu_peminjaman_stadium' %}">
                                {% csrf_token %}
                                <input type="hidden" name="id_stadium" value="{{ id_stadium }}">
                                <input type="hidden" name="date" value="{{ date }}">
                                <input type="hidden" name="start_hours" value="08:00">
                                <input type="hidden" name="end_hours" value="10:00">
                                <button type="submit" class="btn btn-success">Pesan</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <td>10:00 - 12:00</td>
                        <td>
                            <form method="post" action="{% url 'example_app:list_waktu_peminjaman_stadium' %}">
                                {% csrf_token %}
                                <input type="hidden" name="id_stadium" value="{{ id_stadium }}">
                                <input type="hidden" name="date" value="{{ date }}">
                                <input type="hidden" name="start_hours" value="10:00">
                                <input type="hidden" name="end_hours" value="12:00">
                                <button type="submit" class="btn btn-success">Pesan</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <td>12:00 - 14:00</td>
                        <td>
                            <form method="post" action="{% url 'example_app:list_waktu_peminjaman_stadium' %}">
                                {% csrf_token %}
                                <input type="hidden" name="id_stadium" value="{{ id_stadium }}">
                                <input type="hidden" name="date" value="{{ date }}">
                                <input type="hidden" name="start_hours" value="12:00">
                                <input type="hidden" name="end_hours" value="14:00">
                                <button type="submit" class="btn btn-success">Pesan</button>
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <td>14:00 - 16:00</td>
                        <td>
                            <form method="post" action="{% url 'example_app:list_waktu_peminjaman_stadium' %}">
                                {% csrf_token %}
                                <input type="hidden" name="id_stadium" value="{{ id_stadium }}">
                                <input type="hidden" name="date" value="{{ date }}">
                                <input type="hidden" name="start_hours" value="14:00">
                                <input type="hidden" name="end_hours" value="16:00">
                                <button type="submit" class="btn btn-success">Pesan</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <a href="{% url 'example_app:peminjaman_stadium' %}"><button type="button" class="btn btn-primary"
                data-bs-toggle="modal" data-bs-target="#pinjam">Kembali</button></a>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    var backUrl = '{% url "example_app:peminjaman_stadium" %}';
    $(document).ready(function () {
        $('form').submit(function (event) {
            event.preventDefault();

            var form = $(this);
            var url = form.attr('action');
            var data = form.serialize();

            $.ajax({
                type: "POST",
                url: url,
                data: data,
                success: function (response) {
                    alert(response.message);
                    window.location.href = backUrl;
                },
            });
        });
    });
</script>
{% endblock content %}